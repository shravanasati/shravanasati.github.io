<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>Achieving Infinite WPM in MonkeyType using Python</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />

<link rel="stylesheet" href="/application.d158310308aa049a4166958afa0fa120421743aee9d7ebf6976688742acd4574.css" integrity="sha256-0VgxAwiqBJpBZpWK&#43;g&#43;hIEIXQ67p1&#43;v2l2aIdCrNRXQ=" />





  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/site/favicon_hud8d44aafaf58024f6b37e4c7de2adfb4_40926_42x0_resize_box_3.png" />

<meta property="og:url" content="http://localhost:1313/posts/selenium/">
  <meta property="og:site_name" content="Shravan Asati">
  <meta property="og:title" content="Achieving Infinite WPM in MonkeyType using Python">
  <meta property="og:description" content="An extensive Selenium tutorial with Python.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-16T00:32:25+05:30">
    <meta property="article:modified_time" content="2024-05-16T00:32:25+05:30">

    <meta name="twitter:card" content="summary"><meta name="twitter:title" content="Achieving Infinite WPM in MonkeyType using Python">
<meta name="twitter:description" content="An extensive Selenium tutorial with Python.">

    
    
<meta name="description" content="An extensive Selenium tutorial with Python." />


    

    
        
            
            

            
            

            
            
                
                    <script data-goatcounter="https://softbubble.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
                    
            

            
            

            

            
        
    




<script>
      theme = localStorage.getItem('darkmode:color-scheme') || 'system';
      if (theme == 'system') {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          theme = 'dark';
        } else {
          theme = 'light';
        }
      }
      document.documentElement.setAttribute('data-theme', theme);
    </script>
  </head>

  <body class="type-posts kind-page" data-bs-spy="scroll" data-bs-target="#TableOfContents" data-bs-offset="80">
    <div class="container-fluid bg-secondary wrapper">
      
      
    













  


  




  
  
    
  
  



  
  
    
  
  







  




  




  


<nav class="navbar navbar-expand-xl top-navbar shadow " id="top-navbar">
  <div class="container">
    
    <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button">
      <i data-feather="sidebar"></i>
    </button>
    
    <a class="navbar-brand" href="/">
      
        <img src="/images/site/main-logo_hu271cdb825a04ec6e0718f49a091ec7cd_143559_42x0_resize_box_3.png" id="logo" alt="Logo">
      Shravan Asati</a>
    <button
      class="navbar-toggler navbar-light"
      id="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#top-nav-items"
      aria-label="menu"
    >
      <i data-feather="menu"></i>
    </button>

    <div class="collapse navbar-collapse dynamic-navbar" id="top-nav-items">
      <ul class="nav navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/#home">Home</a>
        </li>
        
          
          
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#about">About</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#skills">Skills</a>
                </li>
              
            
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#education">Education</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/#projects">Projects</a>
                </li>
              
            
            
            
            
              
              
            
            
            
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                
                  
                    
                    
                  
                  
                    
                    
                  
                  
                  
                    
                    
                  
                  
                    
                    
                  
                  
                  
                  
                    
                    
                      <a class="dropdown-item" href="/#recent-posts">Recent Posts</a>
                    
                  
                  
                  
              </div>
            </li>
          
        
        
          <div id="top-navbar-divider"></div>
        
        
          <li class="nav-item">
            <a class="nav-link" id="blog-link" href="/posts">Posts</a>
          </li>
        
        
        
            
              <li class="nav-item">
                <a class="nav-link" href="/files/cv.pdf">Resume</a>
              </li>
            
        
        
        
          <li class="nav-item dropdown">
<a class="nav-link dropdown-toggle"  href="#" id="themeSelector" role="button"
  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <img id="navbar-theme-icon-svg" class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
</a>
<div id="themeMenu" class="dropdown-menu dropdown-menu-icons-only" aria-labelledby="themeSelector">
  <a class="dropdown-item nav-link" href="#" data-scheme="light">
    <img class="theme-icon" src="/icons/sun-svgrepo-com.svg" width=20 alt="Light Theme">
  </a>
  <a class="dropdown-item nav-link" href="#" data-scheme="dark">
    <img class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
  </a>
  <a class="dropdown-item nav-link" href="#" data-scheme="system">
    <img class="theme-icon" src="/icons/computer-svgrepo-com.svg" width=20 alt="System Theme">
  </a>
</div>
</li>

        
      </ul>
    </div>
  </div>
  
  
    <img src="/images/site/main-logo_hu271cdb825a04ec6e0718f49a091ec7cd_143559_42x0_resize_box_3.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/site/inverted-logo_huaf29acad7fdd78121b61745357f64982_215332_42x0_resize_box_3.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts/" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
    
    
  
  
    
    <li><a class="active list-link" href="/posts/selenium/" title="Infinite WPM with Python">Infinite WPM with Python</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/posts/production-berserk/" title="Production Blunder">Production Blunder</a></li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(/posts/selenium/hero.png);'>
      </div>

      
      <div class="page-content">
        
        <div class="author-profile ms-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author/shravan_hu723175651ee0a89b854711a46a667009_4543508_120x120_fit_box_3.png' alt="Author Image">
          <h5 class="author-name">Shravan Asati</h5>
          <p class="text-muted">Thursday, May 16, 2024 | 10 minutes</p>
        </div>
        
        
        <div class="title">
          <h1>Achieving Infinite WPM in MonkeyType using Python</h1>
        </div>

        

        
          <div class="tags">
  <ul style="padding-left: 0;">
    
  </ul>
</div>

        
        <div class="post-content" id="post-content">
          <p>So I have this one friend who constantly boasts about his sub-200 WPM typing speed. I tried competing with him but couldn&rsquo;t manage it above 100 WPM. I decided it was not worth the effort since I could beat him with the help of Python! :)</p>
<p>We&rsquo;ll be using the awesome <a href="https://www.selenium.dev/" target="_blank" rel="noopener">selenium</a> library for this task.</p>
<div style="margin-top: 3rem;"></div>
<h2 id="prerequisites">Prerequisites</h2>
<p>Just intermediate-level knowledge of Python and HTML tags. That&rsquo;s all. I&rsquo;ll be explaining selenium along the way. This is essentially a selenium tutorial since I love project-based learning.</p>
<div style="margin-top: 3rem;"></div>
<h2 id="what-is-selenium">What is Selenium?</h2>
<p>Selenium is a browser automation library which has bindings available for <a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#requirements-by-language" target="_blank" rel="noopener">several programming languages</a>, including Python. We&rsquo;ll be exploiting the power of the selenium webdriver, which allows us to control the browser programmatically.</p>
<p>Selenium is mostly used for automated testing purposes, and occasionally to do such cool things.</p>
<p>Internally, selenium uses <strong>webdrivers</strong> provided by browsers such as the GeckoDriver for Firefox, the Chromedriver for Chrome and so on to control the browser.</p>
<div style="margin-top: 3rem;"></div>
<h2 id="development-setup">Development Setup</h2>
<p>We need three things installed on our system to write selenium scripts - the language libraries, the browser we want to use, and the driver for that specific browser.</p>
<p>This used to be a cumbersome process for developers and often led to a lot of confusion among beginners, especially around having drivers on <code>PATH</code>.</p>
<p>Fortunately, the selenium team developed the <a href="https://www.selenium.dev/documentation/selenium_manager/" target="_blank" rel="noopener">selenium manager</a> which automatically manages the browser and driver, and ships with language libraries.</p>
<p>Thus all we need to do is to install the selenium library for Python.</p>
<p>This is simple:</p>
<pre tabindex="0"><code>pip install selenium==4.20.0
</code></pre><p>(v4.20.0 because I&rsquo;m also using it.)</p>



    


<div class="alert info">
    <span><i data-feather="info"></i></span>
    <span><strong>Ideally, you should also create a virtual environment to isolate your project dependencies from the system-wide ones. Read more about it <a href="https://realpython.com/python-virtual-environments-a-primer/" target="_blank" rel="noopener">here</a>.</strong></span>
</div>

<div style="margin-top: 3rem;"></div>
<h2 id="some-gotchas">Some Gotchas</h2>
<p>Before getting into writing code, I&rsquo;d like to discuss some of the selenium gotchas.</p>
<ul>
<li>
<p>The browser knows it is being remotely controlled.</p>
</li>
<li>
<p>None of your logins (cookies to be precise) of any websites, browser settings and extensions will be remembered when the browser is being controlled by selenium.</p>
</li>
<li>
<p>Even the browsing history and cookies obtained during the session will not be saved.</p>
</li>
<li>
<p>That means, if you’re performing an action like logging in or clicking the cookie popup, you’d have to do it every time a new session is opened.</p>
</li>
<li>
<p>Don’t poke around too much with big websites, they have mechanisms to know a bot is playing with their website. They might IP block you.</p>
</li>
<li>
<p>Selenium can’t get around smart captchas like reCAPTCHA, or any captchas for that matter, on its own.</p>
</li>
</ul>
<h2 id="writing-the-script">Writing the Script</h2>
<p>Let&rsquo;s get to writing the code now.</p>
<p>First of all, let&rsquo;s import the selenium library.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium <span style="color:#f92672">import</span> webdriver
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.webdriver.common.by <span style="color:#f92672">import</span> By
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.webdriver.support.wait <span style="color:#f92672">import</span> WebDriverWait
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> selenium.webdriver.support.expected_conditions <span style="color:#66d9ef">as</span> EC
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.common.exceptions <span style="color:#f92672">import</span> NoSuchElementException
</span></span></code></pre></div><p>You might notice that&rsquo;s a lot of imports, but bear with me - I&rsquo;ll explain them as we use them.</p>
<p>Let&rsquo;s start with opening the monkeytype website using selenium.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>driver <span style="color:#f92672">=</span> webdriver<span style="color:#f92672">.</span>Firefox()
</span></span><span style="display:flex;"><span>driver<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;https://monkeytype.com&#34;</span>)
</span></span></code></pre></div><p>If you want to use chrome, or any other browser use the respective class present in the <code>webdriver</code> module. For example, <code>Chrome</code>, <code>Edge</code>, <code>Safari</code>, <code>Ie</code> (why?) and so on. Also, if the browser immediately exits after loading the website, add an <code>input()</code> statement at the end of the file.</p>



    


<div class="alert info">
    <span><i data-feather="info"></i></span>
    <span><strong>The first time you&rsquo;ll run this script, it might take a lot of time before the browser window is opened since selenium downloads the necessary webdrivers first.</strong></span>
</div>

<p>After running the script, this is what we see.</p>
<img src="/posts/selenium/initial.png"
    
        alt="Initial monkeytype page"
    
    
    
    
    
>

<div style="margin-top: 1rem;"></div>
<p>So we&rsquo;ve visited the MonkeyType website using Selenium. The next step is to interact with the website.</p>
<p>The first thing we see is the cookie popup, and since I mentioned before that browsers remove all cookies obtained during the selenium, we&rsquo;ll have to click either accept or reject button everytime the website is opened.</p>
<p>Let&rsquo;s code clicking the &ldquo;reject non-essential&rdquo; button.</p>
<p>Everytime we want to interact with a web element using selenium, like clicking or simulate typing, we have to find that element. Selenium provides a neat way to do it - we can use CSS selectors, IDs, classes, XPATH, tag names and so on.</p>
<p>Open the browser developer tools (<kbd><kbd>CTRL</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></kbd> or <kbd>F12</kbd>) and go to the <strong>Inspector</strong> tab. Click on the element picker icon (or press <kbd>Ctrl+Shift+C</kbd>) and click on the <strong>reject non-essential</strong> button.</p>
<p>You&rsquo;ll see the resulting HTML code responsible for that button. Upon looking at the HTML definition of that button, you&rsquo;ll see that this button has a class of <code>rejectAll</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;clicking reject all&#34;</span>)
</span></span><span style="display:flex;"><span>rejectbutton <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;button.rejectAll&#34;</span>)
</span></span><span style="display:flex;"><span>rejectbutton<span style="color:#f92672">.</span>click()
</span></span></code></pre></div><p>The <code>find_element</code> method of the driver takes two arguments - the locator strategy and the locator value. We have used CSS selectors here. The <code>By</code> class (more like an enum) has various locator strategies defined as constants.</p>
<p>The <code>click</code> method is straight-forward, we store the element we found in a variable and then call the click method on it.</p>
<p>Note that the <code>find_element</code> method will raise the <code>NoSuchElementException</code> if it doesn&rsquo;t find the element based on the locator we provided.</p>
<p>Next, we need to configure the test options. I&rsquo;ve decided to go for the <strong>words</strong> test with 25 words. That&rsquo;s also easy - just find the elements and click them.</p>
<p>Open the dev tools again and pick the words option. We don&rsquo;t find any ID or class associated with this element. Let the dev tools do the heavy lifting, just right click on the element and copy its selector. Do the same for selecting the number of words.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;selecting words -&gt; 25&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;div.mode &gt; div:nth-child(2)&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn<span style="color:#f92672">.</span>click()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>wait <span style="color:#f92672">=</span> WebDriverWait(driver, timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, poll_frequency<span style="color:#f92672">=</span><span style="color:#ae81ff">.5</span>, ignored_exceptions<span style="color:#f92672">=</span>errors)
</span></span><span style="display:flex;"><span>wait<span style="color:#f92672">.</span>until(EC<span style="color:#f92672">.</span>presence_of_element_located((By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;.wordCount &gt; div:nth-child(2)&#34;</span>)))
</span></span><span style="display:flex;"><span>words_btn <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;.wordCount &gt; div:nth-child(2)&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn<span style="color:#f92672">.</span>click()
</span></span></code></pre></div><p>The finding and clicking of elements is the same - however we&rsquo;re also using <strong>explicit waits</strong> here.</p>
<p>Waits in selenium, as the name implies, used to wait. While working with selenium, we often need to wait after we&rsquo;ve performed a certain action. Perhaps an element we interacted changes a lot of the webpage structure, or redirects us somewhere else. In these cases, we use waits.</p>
<p>There are two kinds of waits in selenium - <strong>implicit</strong> and <strong>explicit</strong> waits. Implicit waits are simple, once set for the driver, everytime selenium locates an element it waits for the given number of seconds while simultaneously trying to locate the element. If selenium is unable to find the element even after waiting, it will throw the <code>NoSuchElementException</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>driver<span style="color:#f92672">.</span>implicitly_wait(<span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>This will set an implicit wait for the driver. Note that this is a global setting that applies to every element location call for the entire session. If the element is found, for example, in a second, driver will not wait any longer. It will return element reference and continue executing further.</p>
<p>As you might&rsquo;ve already guessed, using implicit waits is not a very good idea. You can never know how long will it take for requests to finish. A better solution is to use explicit waits.</p>
<p>Explicit waits have a condition associated with them that must evaluate to <code>True</code> before the code can continue executing. An explicit wait can be initialized as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>wait <span style="color:#f92672">=</span> WebDriverWait(driver, timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, poll_frequency<span style="color:#f92672">=</span><span style="color:#ae81ff">.5</span>, ignored_exceptions<span style="color:#f92672">=</span>errors)
</span></span></code></pre></div><p>The driver and timeout argument must be given. The timeout is the max duration you want driver to spend waiting until the given condition evaluates to <code>True</code>. Obviously, you don&rsquo;t want your code to spend an eternity waiting in case the condition can never be <code>True</code>. A <code>TimeoutException</code> will be thrown when the timeout is over.</p>
<p>The rest two arguments, <code>poll_frequency</code> and <code>ignored_exeptions</code> tell selenium how long to sleep before evaluating the condition and which exceptions to ignore, if any occur, respectively.</p>
<p>The <code>wait</code> object has two public methods - <code>until</code> and <code>until_not</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>wait<span style="color:#f92672">.</span>until(<span style="color:#66d9ef">lambda</span> d: element<span style="color:#f92672">.</span>is_displayed())
</span></span></code></pre></div><p>Both <code>until</code> and <code>until_not</code> methods accept a function which takes the driver as argument, and returns a truthy value which will then stop the wait.</p>
<p>We can use these methods to wait until a element is visible, present in the DOM and so on. The <code>expected_conditions</code> module we imported above comes with a lot of helpful pre-defined functions that do these tasks. Make sure to check their <a href="https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html" target="_blank" rel="noopener">documentation</a>.</p>
<p>We&rsquo;ll use the <code>presence_of_element_located</code> function which returns a predicate that will make the webdriver wait until that element is present in DOM. It takes a locator argument, which is just a tuple of the locator strategy and the locator value.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>wait<span style="color:#f92672">.</span>until(EC<span style="color:#f92672">.</span>presence_of_element_located((By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;.wordCount &gt; div:nth-child(2)&#34;</span>)))
</span></span></code></pre></div><p>Waiting until the elements are present, and in a desired state before interacting with them is always a good idea.</p>



    


<div class="alert danger">
    <span><i data-feather="alert-octagon"></i></span>
    <span><strong>Do NOT ever use implicit and explicit waits together in a script. They lead to unpredictable behavior.</strong></span>
</div>

<div style="margin-top: 1rem;"></div>
<p>Whoops, that was a lot of theory. Let&rsquo;s take a look at code accumulated so far. It should open the monkeytype website, click on the &ldquo;reject non-essential&rdquo; button, select words mode and 25 words.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium <span style="color:#f92672">import</span> webdriver
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.webdriver.common.by <span style="color:#f92672">import</span> By
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.webdriver.support.wait <span style="color:#f92672">import</span> WebDriverWait
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> selenium.webdriver.support.expected_conditions <span style="color:#66d9ef">as</span> EC
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> selenium.common.exceptions <span style="color:#f92672">import</span> NoSuchElementException
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>driver <span style="color:#f92672">=</span> webdriver<span style="color:#f92672">.</span>Firefox()
</span></span><span style="display:flex;"><span>driver<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;https://monkeytype.com&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;clicking reject all&#34;</span>)
</span></span><span style="display:flex;"><span>rejectbutton <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;button.rejectAll&#34;</span>)
</span></span><span style="display:flex;"><span>rejectbutton<span style="color:#f92672">.</span>click()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;selecting words -&gt; 25&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;div.mode &gt; div:nth-child(2)&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn<span style="color:#f92672">.</span>click()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>wait <span style="color:#f92672">=</span> WebDriverWait(driver, timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, poll_frequency<span style="color:#f92672">=</span><span style="color:#ae81ff">.5</span>, ignored_exceptions<span style="color:#f92672">=</span>errors)
</span></span><span style="display:flex;"><span>wait<span style="color:#f92672">.</span>until(EC<span style="color:#f92672">.</span>presence_of_element_located((By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;.wordCount &gt; div:nth-child(2)&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>words_btn <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;.wordCount &gt; div:nth-child(2)&#34;</span>)
</span></span><span style="display:flex;"><span>words_btn<span style="color:#f92672">.</span>click()
</span></span></code></pre></div><p>Finally, we just need to simulate typing into the monkeytype website.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> time <span style="color:#f92672">import</span> sleep
</span></span><span style="display:flex;"><span>sleep(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;writing into input&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>prompt <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_element(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;input#wordsInput&#34;</span>)
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> driver<span style="color:#f92672">.</span>find_elements(By<span style="color:#f92672">.</span>CSS_SELECTOR, <span style="color:#e6db74">&#34;div.word&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join([w<span style="color:#f92672">.</span>text <span style="color:#66d9ef">for</span> w <span style="color:#f92672">in</span> word<span style="color:#f92672">.</span>find_elements(By<span style="color:#f92672">.</span>TAG_NAME, <span style="color:#e6db74">&#34;letter&#34;</span>)])
</span></span><span style="display:flex;"><span>    text <span style="color:#f92672">=</span> text<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>    prompt<span style="color:#f92672">.</span>send_keys(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>text<span style="color:#e6db74">}</span><span style="color:#e6db74"> &#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>input(<span style="color:#e6db74">&#34;press enter to exit&#34;</span>)
</span></span><span style="display:flex;"><span>driver<span style="color:#f92672">.</span>quit()
</span></span></code></pre></div><p>First of all, I&rsquo;m doing a dirty practice here by sleeping two seconds instead of using explicit waits.
Yeah I will not justify using it.</p>
<p>The code finds the <code>input</code> element and stores it in the <code>prompt</code> variable. To simulate typing into the input, we can use the <code>send_keys('text')</code> method on <code>prompt</code>.</p>
<p>Next, we need to find the words. Similar to the <code>find_element</code> function, <code>find_elements</code> function returns a list of all the elements it could find by the locator. This is because each word on monkeytype is defined like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;word active&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">letter</span>&gt;l&lt;/<span style="color:#f92672">letter</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">letter</span>&gt;i&lt;/<span style="color:#f92672">letter</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">letter</span>&gt;k&lt;/<span style="color:#f92672">letter</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">letter</span>&gt;e&lt;/<span style="color:#f92672">letter</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>Once we&rsquo;ve grabbed all the words, we need to construct the word by joining the text inside all <code>letter</code> tags. We do it by looping over the <code>word</code> container, then inside each <code>word</code>, we call <code>find_elements</code> for letter tags and grab its inner text. After combining all the letters, we remove all the whitespaces just in case. Finally, we call the <code>send_keys</code> function to type the constructed word and a space (!important).</p>
<p>The <code>driver.quit()</code> method closes the browser window. We&rsquo;re waiting for user input before quitting so you can admire the typing speed you can never achieve.</p>
<div style="margin-top: 3rem;"></div>
<h2 id="the-result">The Result</h2>
<p>I recorded my screen and sent it to my friend. Let&rsquo;s just say, his reaction was pleasing to witness.</p>
<div style="margin-top: 2rem;"></div>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/QS3sLXEaG0g?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="monkeytype infinite wpm"
      ></iframe>
    </div>

<div style="margin-top: 2rem;"></div>
<p>Here&rsquo;s the full code:</p>
<script src="https://gist.github.com/shravanasati/67c613b827db4ac34b0c90938e5e2692.js"></script>

<div style="margin-top: 2rem;"></div>
<p>Websites tend to change a lot - that means the HTML structure changes too. So in the near future, this script might no longer work due to element locators becoming obsolete. Between the time I first wrote the script and the publishing date of this blog, I&rsquo;ve had to modify it twice. But with the knowledge and procedure I&rsquo;ve shared above, you will be able to fix it.</p>
<p>Another thing - I tested this script on Firefox, Chrome and Edge - only Firefox had Infinite WPM, the chromium based browsers only did around 400wpm. This just proves why Firefox is superior <code>/s</code>.</p>
<div style="margin-top: 2rem;"></div>
<h2 id="going-forward">Going forward</h2>
<p>The script is barely crossing 30 lines, yet we&rsquo;ve managed to automate monkeytype with selenium.</p>
<p>You can modify this program to add some interactivity - like choosing a test mode and further adding options to change parameters like words and time. The code is also quite unorganized. I leave this as exercise to you, the reader; and if you manage to do it, please let me know on my socials (listed below).</p>
<p>Until then, bye.</p>
<div style="margin-top: 3rem;"></div>

        </div>

        
        <div class="row ps-3 pe-3">
        
          <div class="col-md-6 share-buttons">
          
            <strong>Share on:</strong>
            
            <a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
            
            
                <a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f&text=Achieving%20Infinite%20WPM%20in%20MonkeyType%20using%20Python&via=Shravan%20Asati" target="_blank">
                  <i class="fab fa-twitter"></i>
                </a>
            
            
                <a  class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f&title=Achieving%20Infinite%20WPM%20in%20MonkeyType%20using%20Python" target="_blank">
                  <i class="fab fa-reddit"></i>
                </a>
            
            
            
            
                <a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f&title=Achieving%20Infinite%20WPM%20in%20MonkeyType%20using%20Python" target="_blank">
                  <i class="fab fa-linkedin"></i>
                </a>
            
            
             
            
                 <a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Achieving%20Infinite%20WPM%20in%20MonkeyType%20using%20Python http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f" target="_blank">
                  <i class="fab fa-whatsapp"></i>
                </a>
            
            
                <a class="btn icon-button" href="mailto:?subject=Achieving%20Infinite%20WPM%20in%20MonkeyType%20using%20Python&body=http%3a%2f%2flocalhost%3a1313%2fposts%2fselenium%2f" target="_blank">
                  <i class="fas fa-envelope-open-text"></i>
                </a>
            
          
          </div>

        
        
          
            
          
          <div class="col-md-6 btn-improve-page">
             
               <a href="https://github.com/shravanasati/shravanasati.github.io/edit/main/content/posts%5cselenium%5cindex.md" title="Improve this page" target="_blank" rel="noopener">
            
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        
        </div>



      
      <hr />
        







  





  
    
    
  
  

  
  


<div class="row next-prev-navigator">
  
  
      
      
      <div class="col-md-12 next-article">
        <a href="/posts/production-berserk/" title="How Everything Suddenly Goes Berserk in Production" class="btn filled-button">
          <div>Next <i class="fas fa-chevron-circle-right"></i></div>
          <div class="next-prev-text">How Everything Suddenly Goes Berserk in Production</div>
        </a>
      </div>
    
</div>

      <hr />

      
      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn" type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Scroll to top">
    <i class="fas fa-chevron-circle-up"></i>
  </a>
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center ps-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#what-is-selenium">What is Selenium?</a></li>
    <li><a href="#development-setup">Development Setup</a></li>
    <li><a href="#some-gotchas">Some Gotchas</a></li>
    <li><a href="#writing-the-script">Writing the Script</a></li>
    <li><a href="#the-result">The Result</a></li>
    <li><a href="#going-forward">Going forward</a></li>
  </ul>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
    
      
    
  


  
  
  
    
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-start">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#skills">Skills</a>
                </li>
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#education">Education</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#projects">Projects</a>
                </li>
              
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/#recent-posts">Recent Posts</a>
                </li>
              
              
              
            
              
                
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
              
                <li><a href=mailto:dev.shravan@proton.me target="_blank" rel="noopener">
                  <span><i class="fas fa-envelope"></i></span> <span>dev.shravan@proton.me</span>
                </a></li>
              
            
              
                <li><a href=https://github.com/shravanasati target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>shravanasati</span>
                </a></li>
              
            
              
                <li><a href=https://www.linkedin.com/in/shravan-asati target="_blank" rel="noopener">
                  <span><i class="fab fa-linkedin"></i></span> <span>Shravan Asati</span>
                </a></li>
              
            
          </ul>
        </div>
        
        
        
      </div>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-start">
        <div class="col-md-4">
          <a id="theme" href="https://github.com/hugo-toha/toha" target="_blank" rel="noopener">
            <img src="/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png" alt="Toha Theme Logo">
            Toha
          </a>
        </div>
        <div class="col-md-4 text-center">© 2024 Copyright.</div>
        <div class="col-md-4 text-end">
          <a id="hugo" href="https://gohugo.io/" target="_blank" rel="noopener">Powered by
          <img
            src="/images/hugo-logo.svg"
            alt="Hugo Logo"
            height="18"
          />
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script src="/application.4931f759dfbd47b5bb8d7a4383f4a5554a655dc044441b3b6152be2eb311f986.js" integrity="sha256-STH3Wd&#43;9R7W7jXpDg/SlVUplXcBERBs7YVK&#43;LrMR&#43;YY=" defer></script>


    
     

    
    

</body>
</html>
